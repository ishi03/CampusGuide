
<!DOCTYPE html>
<html>
    <head>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <link href="/static/css/style.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href= "https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" >
        <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
        
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
<script src=
        "https://code.jquery.com/jquery.min.js">
    </script>
  
    </head>
<body>
  <div class="container">
    <div >
    <a href="http://127.0.0.1:5000" class="bbtn">HOME</a>
    </div>
<div><h1><b>Welcome to Somaiya Vidyavihar!</strong></h1></div>
 
<!-- {% for item in data %}
    <span onclick=someFunction( {{ item|safe }});>{{ item }}</span>
{% endfor %} -->
 
<script type="text/javascript">
  var data = JSON.parse(`{{ data | tojson }}`); 
  console.log(data);
 </script>
 <script type="text/javascript">
 var x = document.getElementById("demo");
 function getLocation() {
   if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(myMap);
    } else { 
      x.innerHTML = "Geolocation is not supported by this browser.";
    }
  }
 
  var items = JSON.parse(`{{ items | tojson }}`); </script>
 
 <script> 
function myMap() {
  var data_len=parseInt("{{leng}}");
  var i=0;
 
var mapProp= {
  center:new google.maps.LatLng(19.072742,72.900600),
  mapTypeId: 'hybrid',
  zoom:18,
};
 var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
// var marker1 = new google.maps.Marker({
//   position:new google.maps.LatLng(position.coords.latitude,position.coords.longitude),
//   animation:google.maps.Animation.DROP,
//   map : map,
//   title:"You are here",
// }); 
// marker1.setMap(map);
for (var i = 0; i < data.length; i++) {
  var data2 = data[i];
  //var myLatlng = new google.maps.LatLng(data2.lat, data2.lng);
  var marker = new google.maps.Marker({
      position: { lat: parseFloat(data[i].x_coord) , lng:parseFloat(data[i].y_coord) },
      animation:google.maps.Animation.DROP,
      map: map,
      title: data[i].name
  });
  var infoWindow = new google.maps.InfoWindow();
  (function (marker, i) {
    google.maps.event.addListener(marker, "click", function (e) {
        infoWindow.setContent("<div style = 'width:200px;min-height:20px'>"+ data[i].name+ "</div>");
        infoWindow.open(map, marker);
        var Clickeddp= data[i].des+"<br><img src="+data[i].img+">";
        document.getElementById('cd').innerHTML = Clickeddp;
    });
})(marker,i);
}
 
 
  if (document.getElementById("toggle-one").checked) {
    for(var j=0;j<items.length;j++){
    if(items[j][4]=='educational building'){
      console.log(items[j])
      var prevmarker = new google.maps.Marker({
      position: { lat: parseFloat(items[j][0]) , lng:parseFloat(items[j][1]) },
      animation:google.maps.Animation.DROP,
      map: map,
      title: items[j][2],
      icon: { url: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png" }
  });
  (function (prevmarker, j) {
    google.maps.event.addListener(prevmarker, "click", function (e) {
        infoWindow.setContent("<div style = 'width:200px;min-height:20px'>"+ items[j][2]+ "</div>");
        infoWindow.open(map, prevmarker);
        var Clickeddp= items[j][3]+"<br><img src="+items[j][5]+">";
        document.getElementById('cd').innerHTML = Clickeddp;
    });
})(prevmarker,j);
  }
}
  } 
 
   if (document.getElementById("toggle-two").checked) {
    for(var j=0;j<items.length;j++){
    if(items[j][4]=='hostel'){
      console.log(items[j])
      var prevmarker = new google.maps.Marker({
      position: { lat: parseFloat(items[j][0]) , lng:parseFloat(items[j][1]) },
      animation:google.maps.Animation.DROP,
      map: map,
      title: items[j][2],
      icon: { url: "http://maps.google.com/mapfiles/ms/icons/pink-dot.png" }
  });
  (function (prevmarker, j) {
    google.maps.event.addListener(prevmarker, "click", function (e) {
        infoWindow.setContent("<div style = 'width:200px;min-height:20px'>"+ items[j][2]+ "</div>");
        infoWindow.open(map, prevmarker);
        var Clickeddp= items[j][3]+"<br><img src="+items[j][5]+">";
        document.getElementById('cd').innerHTML = Clickeddp;
    });
})(prevmarker,j);
  }
}
  }
 
  if (document.getElementById("toggle-three").checked) {
    for(var j=0;j<items.length;j++){
    if(items[j][4]=='canteen'){
      console.log(items[j])
    var prevmarker = new google.maps.Marker({
      position: { lat: parseFloat(items[j][0]) , lng:parseFloat(items[j][1]) },
      animation:google.maps.Animation.DROP,
      map: map,
      title: items[j][2],
      icon: { url: "http://maps.google.com/mapfiles/ms/icons/yellow-dot.png" }
  });
  (function (prevmarker, j) {
    google.maps.event.addListener(prevmarker, "click", function (e) {
        infoWindow.setContent("<div style = 'width:200px;min-height:20px'>"+ items[j][2]+ "</div>");
        infoWindow.open(map, prevmarker);
        var Clickeddp= items[j][3]+"<br><img src="+items[j][5]+">";
        document.getElementById('cd').innerHTML = Clickeddp;
    });
})(prevmarker,j);
  }
}
  } 
if (document.getElementById("toggle-four").checked) {
    for(var j=0;j<items.length;j++){
    if(items[j][4]=='sports'){
      console.log(items[j])
    var prevmarker = new google.maps.Marker({
      position: { lat: parseFloat(items[j][0]) , lng:parseFloat(items[j][1]) },
      animation:google.maps.Animation.DROP,
      map: map,
      title: items[j][2],
      icon: { url: "http://maps.google.com/mapfiles/ms/icons/green-dot.png" }
  });
(function (prevmarker, j) {
    google.maps.event.addListener(prevmarker, "click", function (e) {
        infoWindow.setContent("<div style = 'width:200px;min-height:20px'>"+ items[j][2]+ "</div>");
        infoWindow.open(map, prevmarker);
        var Clickeddp= items[j][3]+"<br><img src="+items[j][5]+">";
        document.getElementById('cd').innerHTML = Clickeddp;
    });
})(prevmarker,j);
  }
}
  } 
}
</script>
 
<div id="tgl" class="container">
  <div class="btn" style="display:inline-block;">
<button class="bbtn" onclick="getLocation()">Get your location</button>
<p id="demo"></p>
</div>
 
    <label class="switch1">
    <input id = "toggle-one" type="checkbox" data-toggle="toggle" class="switch1-input" onclick="myMap()">
    <span class="switch1-label" data-on="Educational Buildings" data-off="Educational Buildings"></span>
    <span class="switch1-handle"></span>
  </label>
  <label class="switch2">
    <input id = "toggle-two" type="checkbox" data-toggle="toggle" class="switch2-input" onclick="myMap()">
    <span class="switch2-label" data-on="Hostels" data-off="Hostels"></span>
    <span class="switch2-handle"></span>
  </label>
  <label class="switch3">
    <input id = "toggle-three" type="checkbox" data-toggle="toggle" class="switch3-input" onclick="myMap()">
    <span class="switch3-label" data-on="Canteens" data-off="Canteens"></span>
    <span class="switch3-handle"></span>
  </label>
  <label class="switch4">
    <input id = "toggle-four" type="checkbox" data-toggle="toggle" class="switch4-input" onclick="myMap()">
    <span class="switch4-label" data-on="Sports" data-off="Sports"></span>
    <span class="switch4-handle"></span>
  </label>
 
   <div class="search-bar"> 
  <form method="post" action="" >
          <input type="text" placeholder="Search..." name="book">
          <button class="search_btn" type="submit" id="searchbtn" style="background-color:#b7292e;color:white"><i class="fa fa-search" aria-hidden="true"></i></i></button>
  </form>
   </div>
</div>
 
<div id="googleMap" style="margin-left:6%;width:87%;height:700px;"></div>
   <div class="Description-container">
    <!--{% for item in data %}-->
         <div id="cd" class="img"></div>  
    <!--{% endfor %}-->
    </div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-9GIo3XGO28in0EAqLEppQQcms-XHZ0U&callback=myMap"></script>
 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
  </body>
</html>
